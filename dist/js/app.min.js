!function(){"use strict";angular.module("numbleApp",["ngRoute","angular-gestures"])}(),function(){"use strict";angular.module("numbleApp").factory("boardService",function(){function e(t){var r=Math.floor(10*Math.random());return-1!==t.indexOf(r)?e(t):r}function t(t,r){for(var n=[],o=[],u=0;4>=u;u++){n.push([]);for(var a=0;4>=a;a++){var c=(r||[]).shift(),i=c||e(o);0===i&&o.push(0),n[u][a]={x:u,y:a,display:i,select:t(u,a)}}}return n}function r(e,t){var r=Math.abs(e.x-t.x),n=Math.abs(e.y-t.y);return 1>=r&&1>=n}function n(e){return e?e.split(","):void 0}return{getBoard:t,areTouching:r,parseLayout:n}})}(),function(){"use strict";angular.module("numbleApp").controller("GameCtrl",["$scope","$location","$routeParams","stateService","storageService","boardService","timeService","selectionService","winService",function(e,t,r,n,o,u,a,c,i){function s(t,r){return function(){l(e.state.board[t][r])}}function l(e){var t=n.state;if(c.isValidMove(e,t.selected)){e.selected=!0,t.selected.push(e);var r=t.selected.map(function(e){return e.display}),o=i.check(r);o.forEach(function(e){-1===t.found.indexOf(e)&&(t.found.push(e),t.score+=i.getScore(e),n.undo())})}}var f=60;a.setAlert(function(){t.url("/results")}),e.state=n.state,r.goal?(e.scoreStorage=o.getScore(r.goal),e.scoreStorage.then(function(t){e.state.board=u.getBoard(s,u.parseLayout(t.layout)),e.goal=t.score,a.startTimer(f)})):(e.state.board=u.getBoard(s),a.startTimer(f)),e.time=a.getTime,e.timePercentage=function(){return 100*(a.getTime()-1)/f},e.undo=n.undo}])}(),function(){"use strict";angular.module("numbleApp").config(["hammerDefaultOptsProvider",function(e){var t={recognizers:[[Hammer.Tap,{time:250}]]};e.set(t)}])}(),function(){"use strict";angular.module("numbleApp").controller("ResultsCtrl",["$scope","stateService","storageService","$location",function(e,t,r,n){function o(){t.reset(),n.url("/play")}function u(){e.storage=r.storeScore(),e.storage.then(function(t){e.shareId=t.name})}e.score=t.state.score,e.startOver=o,e.getShare=u}])}(),function(){"use strict";angular.module("numbleApp").config(["$routeProvider",function(e){e.when("/",{templateUrl:"partials/start.html",controller:"StartCtrl"}).when("/play",{templateUrl:"partials/game.html",controller:"GameCtrl"}).when("/results",{templateUrl:"partials/results.html",controller:"ResultsCtrl"}).otherwise({redirectTo:"/"})}])}(),function(){"use strict";angular.module("numbleApp").directive("numSelect",["$window",function(e){return{restrict:"A",link:function(t,r){var n=e.getSelection(),o=document.createRange();o.selectNodeContents(r[0]),n.removeAllRanges(),n.addRange(o)}}}])}(),function(){"use strict";angular.module("numbleApp").factory("selectionService",["boardService",function(e){function t(t,r){return t.selected?!1:!(r.length>0)||e.areTouching(t,r[r.length-1])}return{isValidMove:t}}])}(),function(){"use strict";angular.module("numbleApp").controller("StartCtrl",["$scope","$location",function(e,t){function r(){t.url("/play")}e.start=r}])}(),function(){"use strict";angular.module("numbleApp").factory("stateService",function(){function e(){r.selected.forEach(function(e){e.selected=!1}),r.selected.length=0}function t(){e(),r.found.length=0,r.score=0}var r={board:[],selected:[],found:[],score:0};return{undo:e,reset:t,state:r}})}(),function(){"use strict";angular.module("numbleApp").factory("storageService",["$http","stateService",function(e,t){function r(){var r=t.state.board.reduce(function(e,t){return e+t.reduce(function(e,t){return e+t.display+","},"")},""),n={score:t.state.score,values:r.substring(0,r.length-1)};return e.post(o+".json",n).then(function(e){return e.data})}function n(t){return e.get(o+"/"+t+".json").then(function(e){return e.data})}var o="https://project-8921628173750252600.firebaseio.com/games";return{getScore:n,storeScore:r}}])}(),function(){"use strict";angular.module("numbleApp").factory("timeService",["$timeout",function(e){function t(){if(u--,0===u)for(;a.length>0;)a.pop()();else e(t,1e3)}function r(r){u=r,e(t,1e3)}function n(){return u}function o(e){a.push(e)}var u,a=[];return{startTimer:r,getTime:n,setAlert:o}}])}(),function(){"use strict";angular.module("numbleApp").factory("winService",function(){function e(e,t,r){return e+t===r}function t(e,t,r){return e*t===r}function r(r){for(var n=r.length,o=n-1,u=[],a=1;o>a;a++)for(var c=o-a;c>0;c--){var i,s,l;i=s=l=0;for(var f=a-1;f>=0;f--)i+=r[a-f-1]*Math.pow(10,f);for(var d=c-1;d>=0;d--)s+=r[c-d-1+a]*Math.pow(10,d);for(var p=c+a;n>p;p++)l+=r[p]*Math.pow(10,n-p-1);e(i,s,l)&&u.push(i+"+"+s+"="+l),t(i,s,l)&&u.push(i+"*"+s+"="+l)}return u}function n(e){switch(e.length-2){case 3:return 1;case 4:return 3;case 5:return 5;case 6:return 10;case 7:return 15;default:return 23}}return{check:r,getScore:n}})}();